<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Zeth - Zerocash on Ethereum: Zeth - Zerocash on Ethereum</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Zeth - Zerocash on Ethereum
   &#160;<span id="projectnumber">0.8</span>
   </div>
   <div id="projectbrief">Reference implementation of the Zeth protocol by Clearmatics</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Zeth - Zerocash on Ethereum </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><object type="image/svg+xml" data="https://github.com/clearmatics/zeth/workflows/zeth-ci-push-build-macos/badge.svg" style="pointer-events: none;">macOS build</object> <object type="image/svg+xml" data="https://github.com/clearmatics/zeth/workflows/zeth-ci-push-build-ubuntu/badge.svg" style="pointer-events: none;">ubuntu build</object></p>
<p><b>WARNING</b> This project is a Proof of Concept. It is highly inefficient and has not been thoroughly reviewed. Please do not use in production!</p>
<p><b>Disclaimer:</b> This work is inspired from <a href="https://github.com/zcash-hackworks/babyzoe">babyzoe</a>, <a href="https://github.com/barryWhiteHat/miximus.git">Miximus</a>. It follows and extends the design presented in <a href="https://github.com/AntoineRondelet/zerocash-ethereum">zerocash-ethereum</a> by adapting some code initially written by <a href="https://github.com/zcash/zcash">Zcash</a>.</p>
<p>It is not intended for handling real value or for use on public networks. The authors have not created any such deployment, and assume no responsibility for any fork of the code or deployment created by other parties.</p>
<p>Check our <a href="https://arxiv.org/pdf/1904.00905.pdf">paper</a>, and the <a href="https://github.com/clearmatics/zeth-specifications">protocol specifications</a> for more information about Zeth.</p>
<p>Collaboration is welcome. Consider opening an issue or a pull-request targeting this repository, or writing a <a href="https://github.com/clearmatics/zpips">Zeth Protocol Improvement Proposal (ZPIP)</a>.</p>
<h1>Building and running the project:</h1>
<p><b>Warning</b> This project primarily targets x86_64 Linux and macOS platforms.</p>
<h2>Environment</h2>
<p>In order to follow the README below, you will need:</p><ul>
<li><a href="https://www.docker.com/get-started">Docker</a></li>
<li><a href="https://www.npmjs.com/get-npm">Npm</a> (at least version <code>6.9.0</code>)</li>
<li><a href="https://nodejs.org/en/">Node</a> (recommended version <code>v10</code> to be able to build and use the custom <code>ganache-cli</code>)</li>
<li><a href="https://www.python.org/downloads/">Python3</a> (at least version <code>3.7</code>)</li>
<li><a href="https://pip.pypa.io/en/stable/">Pip</a> (at least version <code>19.0.2</code>)</li>
</ul>
<p>Additionally, several tools from the GCC and LLVM tools suite are used to improve code quality and generate the documentation of the project. These are required in order to compile the project with all options enabled:</p><ul>
<li><a href="http://www.doxygen.nl/">Doxygen</a></li>
<li><a href="https://clang.llvm.org/docs/ClangFormat.html">clang-format</a></li>
<li><a href="https://clang.llvm.org/extra/clang-tidy/">clang-tidy</a></li>
<li><a href="http://cppcheck.sourceforge.net/">cppcheck</a></li>
<li><a href="https://include-what-you-use.org/">include-what-you-use</a></li>
<li><a href="https://llvm.org/docs/CommandGuide/llvm-symbolizer.html">llvm-symbolizer</a></li>
</ul>
<p>To use the Zeth functionality, 3 components are required:</p><ul>
<li>An Ethereum network (the commands below use a local testnet) to host the Zeth contracts and handle transactions.</li>
<li>A running <code>prover-server</code> process, used by Zeth clients to generate proofs.</li>
<li>Client tools, which generate all inputs required for a Zeth operations, request proofs from the <code>prover-server</code>, and transmit transactions to the Ethereum network holding the Zeth contract.</li>
</ul>
<p>We use 3 terminals, one for each of the above components.</p>
<p>Note: Mac users should increase docker runtime memory from 2GB to 4GB to allow Terminal 1 to complete successfully.</p>
<h3>Terminal 1:</h3>
<p>We propose 2 alternatives to run the <code>prover-server</code> below.</p>
<h4>Fetch the <code>prover-server</code> image (recommended)</h4>
<div class="fragment"><div class="line">docker pull ghcr.io/clearmatics/zeth:latest-prover</div>
<div class="line">docker run -ti -p 50051:50051 --name prover ghcr.io/clearmatics/zeth:latest-prover prover-server</div>
</div><!-- fragment --><h4>Build and run the <code>prover-server</code> in the development container</h4>
<div class="fragment"><div class="line"># Clone this repository:</div>
<div class="line">git clone git@github.com:clearmatics/zeth.git</div>
<div class="line">cd zeth</div>
<div class="line"> </div>
<div class="line"># Build the zeth-dev image</div>
<div class="line">docker build -f Dockerfile-dev -t zeth-dev .</div>
<div class="line"># Start the zeth development container</div>
<div class="line">docker run -ti -p 50051:50051 --name zeth zeth-dev:latest</div>
<div class="line"> </div>
<div class="line"># All the commands below are run in the docker container</div>
<div class="line"># Configure your environment</div>
<div class="line">. ./setup_env.sh</div>
<div class="line"> </div>
<div class="line"># Compile the proving server</div>
<div class="line">mkdir build</div>
<div class="line">cd build</div>
<div class="line">cmake .. [&lt;flags (see below)&gt;]</div>
<div class="line"># Compile all libraries and tools, including the prover-server</div>
<div class="line">make</div>
<div class="line"># (optional) Run the unit tests</div>
<div class="line">make test</div>
<div class="line"># (optional) Run the all tests (unit tests, syntax checks, etc)</div>
<div class="line">make check</div>
<div class="line"> </div>
<div class="line"># Start the prover-server process</div>
<div class="line">prover-server</div>
</div><!-- fragment --><p>Note: By default, <code>prover-server</code> generates a key at startup. Flags can be used to force the server to load and/or save keys. Run <code>prover-server --help</code> for more details.</p>
<h4>Build Options</h4>
<p>Some flags to the <code>cmake</code> command can control the build configuration. <code>-DCMAKE_BUILD_TYPE=Release</code> or <code>-DCMAKE_BUILD_TYPE=Debug</code> can be used to force a release or debug build.</p>
<p>By default, zeth makes use of the GROTH16 zk-snark. To chose a different zksnark run the following: <code>cmake -DZETH_SNARK=$ZKSNARK ..</code> where <code>$ZETH_SNARK</code> is <code>PGHR13</code> (see <a href="https://eprint.iacr.org/2013/279,">https://eprint.iacr.org/2013/279,</a> <a href="http://eprint.iacr.org/2013/879">http://eprint.iacr.org/2013/879</a>) or <code>GROTH16</code>(see <a href="https://eprint.iacr.org/2016/260">https://eprint.iacr.org/2016/260</a>).</p>
<h3>Terminal 2: Ethereum testnet</h3>
<div class="fragment"><div class="line">scripts/ganache-start</div>
</div><!-- fragment --><h3>Terminal 3: Python client</h3>
<div class="fragment"><div class="line"># Configure your environment</div>
<div class="line">. ./setup_env.sh</div>
<div class="line"> </div>
<div class="line">cd client</div>
</div><!-- fragment --><p>Follow the steps described in the <a class="el" href="client_2README_8md.html">client README</a> to run tests or invoke the zeth tools.</p>
<h1>Secure Multi Party Computation for the Groth16 SRS generation</h1>
<p>See <a class="el" href="mpc_2README_8md.html">MPC for SRS generation documentation</a></p>
<h1>Development dependencies (for building outside of the Docker container)</h1>
<p>Immediate dependencies are provided as submodules and compiled during the Zeth build. Ensure submodules are synced.</p>
<p>The following libraries are also required to build:</p>
<ul>
<li>grpc</li>
<li>gmp</li>
<li>boost</li>
<li>openssl</li>
</ul>
<h1>Generate the Doxygen documentation</h1>
<p>To generate the documentation of Zeth: </p><div class="fragment"><div class="line">cd build</div>
<div class="line">cmake .. -DGEN_DOC=ON &amp;&amp; make docs</div>
</div><!-- fragment --><h1>Compile the project using 'sanitizers'</h1>
<p>You can select the sanitizer of your choice (one of the sanitizers listed <a href="./cmake/sanitizers.cmake">here</a>) by passing the flag <code>-DSANITIZER=&lt;sanitizer&gt;</code> to <code>cmake</code>.</p>
<p>Example: </p><div class="fragment"><div class="line">cd build</div>
<div class="line">cmake -DCMAKE_C_COMPILER=/usr/bin/clang -DCMAKE_CXX_COMPILER=/usr/bin/clang++ -DSANITIZER=Address -DCMAKE_BUILD_TYPE=Debug ..</div>
<div class="line">make check</div>
</div><!-- fragment --><h1>Docker images</h1>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Docker files </th><th class="markdownTableHeadNone">Image </th><th class="markdownTableHeadNone">Tags </th><th class="markdownTableHeadNone">Description  </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a href="./Dockerfile-prover">./Dockerfile-prover</a> </td><td class="markdownTableBodyNone"><a href="https://github.com/orgs/clearmatics/packages/container/package/zeth">ghcr.io/clearmatics/zeth:latest-prover</a> </td><td class="markdownTableBodyNone"><code>latest-prover</code>, <code>X.Y.Z-prover</code> - Release of zeth, <code>git-HASH%-prover</code> - developers build by git-commit </td><td class="markdownTableBodyNone"><a class="el" href="prover__server_2README_8md.html">Zeth Prover Server</a>. Image use <code>zeth-base</code> for building  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a href="./Dockerfile-client">./Dockerfile-client</a> </td><td class="markdownTableBodyNone"><a href="https://github.com/orgs/clearmatics/packages/container/package/zeth">ghcr.io/clearmatics/zeth:latest-client</a> </td><td class="markdownTableBodyNone"><code>latest-client</code>, <code>X.Y.Z-client</code> - Release of zeth, <code>git-HASH%-client</code> - developers build by git-commit </td><td class="markdownTableBodyNone"><a class="el" href="client_2README_8md.html">Python client to interact with the prover</a>  </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone"><a href="./Dockerfile-mpc">./Dockerfile-mpc</a> </td><td class="markdownTableBodyNone"><a href="https://github.com/orgs/clearmatics/packages/container/package/zeth">ghcr.io/clearmatics/zeth:latest-mpc</a> </td><td class="markdownTableBodyNone"><code>latest-mpc</code>, <code>X.Y.Z-mpc</code> - Release of zeth, <code>git-HASH%-mpc</code> - developers build by git-commit </td><td class="markdownTableBodyNone"><a class="el" href="mpc_2README_8md.html">Tools for Multi-Party Computation</a>. Image use <code>zeth-base</code> for building  </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone"><a href="./Dockerfile-base">./Dockerfile-base</a> </td><td class="markdownTableBodyNone"><a href="https://github.com/orgs/clearmatics/packages/container/package/zeth">ghcr.io/clearmatics/zeth:latest-base</a> </td><td class="markdownTableBodyNone"><code>latest-base</code>, <code>A.B.C-base</code> - Release of zeth-base </td><td class="markdownTableBodyNone">Base image for building other containers  </td></tr>
</table>
<h1>Run analysis tools on the code</h1>
<p>Several tools can be ran on the code. These can be enabled via a set of compilation options.</p>
<p>Note: The <code>clang-tidy</code> target runs a clang-tidy python script that should be fetched from <a href="https://github.com/llvm/llvm-project/blob/master/clang-tools-extra/clang-tidy/tool/run-clang-tidy.py">here</a>. To do so, run: <code>cd build &amp;&amp; wget <a href="https://raw.githubusercontent.com/llvm/llvm-project/master/clang-tools-extra/clang-tidy/tool/run-clang-tidy.py">https://raw.githubusercontent.com/llvm/llvm-project/master/clang-tools-extra/clang-tidy/tool/run-clang-tidy.py</a></code></p>
<p>Example: </p><div class="fragment"><div class="line"># run-clang-tidy.py needs to be in the PATH to be found</div>
<div class="line">PATH=$PATH:${PWD}</div>
<div class="line">chmod +x run-clang-tidy.py</div>
<div class="line"> </div>
<div class="line">cmake -DUSE_CLANG_FORMAT=ON -DUSE_CPP_CHECK=ON -DUSE_CLANG_TIDY=ON ..</div>
<div class="line">make cppcheck</div>
<div class="line">make clang-format</div>
<div class="line">make clang-tidy</div>
</div><!-- fragment --><h1>Generate code coverage report</h1>
<ol type="1">
<li>Make sure to enable the <code>CODE_COVERAGE</code> option in the CMake configuration.</li>
<li>Compile the tests <div class="fragment"><div class="line">cd build &amp;&amp; cmake -DCODE_COVERAGE=ON -DCMAKE_BUILD_TYPE=Debug .. &amp;&amp; make check</div>
</div><!-- fragment --></li>
<li>Generate the coverage report: <div class="fragment"><div class="line">make coverage</div>
</div><!-- fragment --></li>
</ol>
<p><b>Note:</b> In order to generate the coverage reports, you will need <code>lcov</code>, along with <code>genhtml</code> and <code>xdg-open</code>.</p>
<h1>References and useful links</h1>
<ul>
<li><b>BabyZoe:</b> <a href="https://github.com/zcash-hackworks/babyzoe">https://github.com/zcash-hackworks/babyzoe</a></li>
<li><b>Miximus:</b> <a href="https://github.com/barryWhiteHat/miximus.git">https://github.com/barryWhiteHat/miximus.git</a></li>
<li><b>SCIPR LAB github:</b> <a href="https://github.com/scipr-lab/">https://github.com/scipr-lab/</a></li>
<li><b>Zcash github:</b> <a href="https://github.com/zcash/zcash">https://github.com/zcash/zcash</a></li>
<li><b>ZeroCash:</b> <a href="http://zerocash-project.org/">http://zerocash-project.org/</a></li>
<li><b>Zerocash-Ethereum:</b> <a href="https://github.com/AntoineRondelet/zerocash-ethereum">https://github.com/AntoineRondelet/zerocash-ethereum</a></li>
</ul>
<h1>License notices:</h1>
<h2>Zcash</h2>
<div class="fragment"><div class="line">Copyright (c) 2016-2018 The Zcash developers</div>
<div class="line">Copyright (c) 2009-2018 The Bitcoin Core developers</div>
<div class="line">Copyright (c) 2009-2018 Bitcoin Developers</div>
<div class="line"> </div>
<div class="line">Permission is hereby granted, free of charge, to any person obtaining a copy</div>
<div class="line">of this software and associated documentation files (the &quot;Software&quot;), to deal</div>
<div class="line">in the Software without restriction, including without limitation the rights</div>
<div class="line">to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</div>
<div class="line">copies of the Software, and to permit persons to whom the Software is</div>
<div class="line">furnished to do so, subject to the following conditions:</div>
<div class="line"> </div>
<div class="line">The above copyright notice and this permission notice shall be included in</div>
<div class="line">all copies or substantial portions of the Software.</div>
<div class="line"> </div>
<div class="line">THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</div>
<div class="line">IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</div>
<div class="line">FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</div>
<div class="line">AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</div>
<div class="line">LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</div>
<div class="line">OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN</div>
<div class="line">THE SOFTWARE.</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">The MIT software license (http://www.opensource.org/licenses/mit-license.php)</div>
<div class="line">above applies to the code directly included in this source distribution.</div>
<div class="line">Dependencies downloaded as part of the build process may be covered by other</div>
<div class="line">open-source licenses. For further details see &#39;contrib/debian/copyright&#39;.</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">This product includes software developed by the OpenSSL Project for use in the</div>
<div class="line">OpenSSL Toolkit (https://www.openssl.org/). This product includes cryptographic</div>
<div class="line">software written by Eric Young (eay@cryptsoft.com).</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line">Although almost all of the Zcash code is licensed under &quot;permissive&quot; open source</div>
<div class="line">licenses, users and distributors should note that when built using the default</div>
<div class="line">build options, Zcash depends on Oracle Berkeley DB 6.2.x, which is licensed</div>
<div class="line">under the GNU Affero General Public License.</div>
</div><!-- fragment --><h2>Libsnark</h2>
<div class="fragment"><div class="line">The libsnark library is developed by SCIPR Lab (http://scipr-lab.org)</div>
<div class="line">and contributors.</div>
<div class="line"> </div>
<div class="line">Copyright (c) 2012-2014 SCIPR Lab and contributors (see AUTHORS file).</div>
<div class="line"> </div>
<div class="line">All files, with the exceptions below, are released under the MIT License:</div>
<div class="line"> </div>
<div class="line">Permission is hereby granted, free of charge, to any person obtaining a copy</div>
<div class="line">of this software and associated documentation files (the &quot;Software&quot;), to deal</div>
<div class="line">in the Software without restriction, including without limitation the rights</div>
<div class="line">to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</div>
<div class="line">copies of the Software, and to permit persons to whom the Software is</div>
<div class="line">furnished to do so, subject to the following conditions:</div>
<div class="line"> </div>
<div class="line">The above copyright notice and this permission notice shall be included in</div>
<div class="line">all copies or substantial portions of the Software.</div>
<div class="line"> </div>
<div class="line">THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</div>
<div class="line">IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</div>
<div class="line">FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</div>
<div class="line">AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</div>
<div class="line">LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</div>
<div class="line">OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN</div>
<div class="line">THE SOFTWARE.</div>
</div><!-- fragment --><h2>Miximus</h2>
<p><a href="https://github.com/barryWhiteHat/miximus/blob/master/LICENSE">barryWhiteHat/miximus GNU General Public License v3.0</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Nov 28 2022 10:29:03 for Zeth - Zerocash on Ethereum by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
